<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AfyaSmart - Health Info & FAQ</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    {% include 'layout.html' %}
    <main class="container my-5">
        <h2 class="text-center mb-4">Health Information & Frequently Asked Questions</h2>

        <section class="mb-5">
            <h3>General Health Tips</h3>
            <p class="lead">Simple advice for a healthier life.</p>
            <ul>
                <li><strong>Stay Hydrated:</strong> Drink plenty of water throughout the day.</li>
                <li><strong>Balanced Diet:</strong> Eat a variety of fruits, vegetables, lean proteins, and whole grains.</li>
                <li><strong>Regular Exercise:</strong> Aim for at least 30 minutes of moderate activity most days of the week.</li>
                <li><strong>Sufficient Sleep:</strong> Get 7-9 hours of quality sleep per night.</li>
            </ul>
        </section>

        <section class="mb-5">
            <h3>Check Symptoms</h3>
            <p>Enter a query below to check symptoms or get information from our health knowledge database.</p>
            <div class="input-group mb-3">
                <input type="text" id="symptom-input" class="form-control" placeholder="e.g., 'symptoms of malaria' or 'what is a headache'">
                <button class="btn btn-secondary" type="button" id="symptom-button">Search</button>
            </div>
            <div id="symptom-result" class="mt-3 p-3 border rounded" style="display:none;"></div>
        </section>

        <section class="mb-5">
            <h3>Frequently Asked Questions</h3>
            <div id="faq-section" class="accordion">
                </div>
        </section>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Fetch data from Flask backend
        document.getElementById('symptom-button').addEventListener('click', async function() {
            const query = document.getElementById('symptom-input').value;
            if (!query) return;

            const resultDiv = document.getElementById('symptom-result');
            resultDiv.style.display = 'block';
            resultDiv.innerHTML = '<p>Searching...</p>';

            const response = await fetch('/api/symptoms', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ query: query })
            });
            const data = await response.json();

            if (data.success) {
                resultDiv.innerHTML = `<p><strong>Answer:</strong> ${data.answer}</p>`;
            } else {
                resultDiv.innerHTML = `<p>${data.answer}</p>`;
            }
        });
    </script>
</body>
</html>
